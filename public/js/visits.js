!function(){const a=window,n=a.location,r=a.navigator,e=a.document;let t=localStorage.getItem("mw:dn");t||(t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^16*Math.random()>>e/4).toString(16)),localStorage.setItem("mw:dn",t));const s=(e,t)=>{a._phantom||a.__nightmare||r.webdriver||a.Cypress||("localhost"===n.hostname||n.hostname.includes(".test")?console.warn("Ignoring Event: localhost or .test"):fetch(`https://metricswave.com/webhooks/${e}?`+new URLSearchParams(t).toString()))},o=(a.metricswave=s,()=>{s(e.currentScript.getAttribute("event-uuid"),{f:"script",visit:sessionStorage.getItem("mw")?0:1,deviceName:t,path:n.pathname,domain:n.hostname,language:r.language,userAgent:r.userAgent,platform:r.platform,referrer:new URLSearchParams(a.location.search).get("utm_source")||e.referrer}),sessionStorage.setItem("mw","1")});let i,c=a.history;c.pushState&&(i=c.pushState,c.pushState=function(){i.apply(this,arguments),o()},a.addEventListener("popstate",o)),"prerender"===e.visibilityState?e.addEventListener("visibilitychange",function(){r||"visible"!==e.visibilityState||o()}):o()}();