!function(){const e=window,t=e.location,a=e.navigator,r=e.document,n=(()=>{if(r.currentScript)return r.currentScript.getAttribute("event-uuid");const e=r.querySelectorAll("script[event-uuid]"),t=e[e.length-1];return t?t.getAttribute("event-uuid"):null})();let s,i=localStorage.getItem("mw:dn");i||(i=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^16*Math.random()>>e/4).toString(16)),localStorage.setItem("mw:dn",i));const m=(r,n)=>{e._phantom||e.__nightmare||a.webdriver||e.Cypress||("localhost"===t.hostname||t.hostname.includes(".test")?console.warn("Ignoring Event: localhost or .test",{uuid:r,params:n}):fetch(`https://metricswave.com/webhooks/${r}?`+new URLSearchParams(n).toString()))};e.metricswave={track:m,setUser:e=>{null===e?localStorage.removeItem("mw:ui"):localStorage.setItem("mw:ui",e)}};const c=()=>{if(s===t.pathname)return;s=t.pathname;const e=new URL(t);m(n,{f:"script",visit:sessionStorage.getItem("mw")?0:1,deviceName:i,userId:localStorage.getItem("mw:ui")??null,path:t.pathname,domain:t.hostname,language:a.language,userAgent:a.userAgent,platform:a.platform,referrer:r.referrer,utm_source:e.searchParams.get("utm_source")||e.searchParams.get("ref"),utm_medium:e.searchParams.get("utm_medium"),utm_campaign:e.searchParams.get("utm_campaign"),utm_term:e.searchParams.get("utm_term"),utm_content:e.searchParams.get("utm_content")}),sessionStorage.setItem("mw","1")};let o,u=e.history;u.pushState&&(o=u.pushState,u.pushState=function(){o.apply(this,arguments),c()},e.addEventListener("popstate",c)),"prerender"===r.visibilityState?r.addEventListener("visibilitychange",function(){a||"visible"!==r.visibilityState||c()}):c(),r.querySelectorAll("[class*='metricswave-event-uuid--']").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.className,a=t.match(/metricswave-event-uuid--([a-zA-Z0-9\-]+)/)[1],r=(t.match(/metricswave-event-param-([a-z0-9\-]+)--([a-zA-Z0-9\-\+]+)/g)??[]).reduce((e,t)=>{if(null===t)return;let[a,r,n]=t.split("--");return a=a.replace("metricswave-event-param-",""),e[a]=r.replace("+"," "),e},{});m(a,r)})})}();